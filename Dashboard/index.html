<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Hotspot</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    body {
      background: #f5f5f5;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 10px;
      height: 100vh;
      overflow-y: auto; /* boleh scroll jika isi lebih banyak */
    }

    .dashboard {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 15px;
      align-items: start; /* isi mulai dari atas */
    }

    .left-col, .middle-col, .right-col {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    #map {
      min-height: 450px;
      border-radius: 12px;
    }

    canvas {
      width: 100% !important;
      height: 250px !important; /* seragam semua chart */
    }

    .table-container {
      max-height: 300px;
      overflow-y: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    table th, table td {
      border: 1px solid #ddd;
      padding: 6px;
      font-size: 12px;
      text-align: left;
    }

    table th {
      background: #f0f0f0;
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <!-- Kiri -->
    <div class="left-col">
      <div class="card">
        <h3>Titik Api Hari Ini</h3>
        <canvas id="todayChart"></canvas>
      </div>
      <div class="card">
        <h3>Titik Api Bulan Ini</h3>
        <canvas id="monthChart"></canvas>
      </div>
      <div class="card">
        <h3>Titik Api per Desa</h3>
        <canvas id="desaChart"></canvas>
      </div>
      <div class="card">
        <h3>Akumulasi Titik Api</h3>
        <canvas id="akumulasiChart"></canvas>
      </div>
      <div class="card">
        <h3>Hotspot per Waktu</h3>
        <canvas id="timeChart"></canvas>
      </div>
    </div>

    <!-- Tengah -->
    <div class="middle-col">
      <div class="card">
        <h3>Peta Titik Api</h3>
        <div id="map"></div>
      </div>
    </div>

    <!-- Kanan -->
    <div class="right-col">
      <div class="card">
        <h3>Data Penggarap Lahan</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Nama</th>
                <th>Luas (Ha)</th>
                <th>Komoditas</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Pak Budi</td><td>12</td><td>Sawit</td></tr>
              <tr><td>Ibu Sari</td><td>8</td><td>Karet</td></tr>
              <tr><td>Pak Andi</td><td>15</td><td>Padi</td></tr>
              <tr><td>Pak Joko</td><td>20</td><td>Jagung</td></tr>
              <tr><td>Bu Rina</td><td>10</td><td>Kakao</td></tr>
              <!-- tambah data lain di sini -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Inisialisasi peta Leaflet
    let map, markersLayer;

    function initMap() {
      map = L.map('map').setView([0.85, 110.33], 9);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      markersLayer = L.layerGroup().addTo(map);

      // contoh marker dummy
      L.marker([0.85, 110.33]).addTo(markersLayer).bindPopup("Hotspot 1");
      L.marker([0.9, 110.4]).addTo(markersLayer).bindPopup("Hotspot 2");

      setTimeout(() => {
        map.invalidateSize();
      }, 500);
    }

    initMap();

    // Chart JS konfigurasi
    function createChart(ctx, type, labels, data, label) {
      return new Chart(ctx, {
        type: type,
        data: {
          labels: labels,
          datasets: [{
            label: label,
            data: data,
            backgroundColor: type === 'bar' ? '#ff6666' : 'rgba(75, 192, 192, 0.2)',
            borderColor: type === 'line' ? '#4bc0c0' : '#ff6666',
            borderWidth: 2,
            fill: type === 'line'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false
        }
      });
    }

    // Chart dummy data
    createChart(document.getElementById('todayChart'), 'bar', ['Hari Ini'], [5], 'Hotspot');
    createChart(document.getElementById('monthChart'), 'bar', ['Minggu 1', 'Minggu 2', 'Minggu 3'], [10, 15, 8], 'Hotspot');
    createChart(document.getElementById('desaChart'), 'bar', ['Desa A', 'Desa B', 'Desa C'], [7, 12, 5], 'Hotspot');
    createChart(document.getElementById('akumulasiChart'), 'bar', ['Jan', 'Feb', 'Mar'], [20, 35, 50], 'Hotspot');
    createChart(document.getElementById('timeChart'), 'line', ['08:00', '12:00', '16:00', '20:00'], [2, 5, 3, 7], 'Hotspot per Waktu');
  </script>
</body>
</html>
